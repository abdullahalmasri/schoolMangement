{"ast":null,"code":"import { FormControl, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/token-storage.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nexport let LoginComponentComponent = /*#__PURE__*/(() => {\n  class LoginComponentComponent {\n    constructor(authService, tokenStorage, router, formBuilder) {\n      this.authService = authService;\n      this.tokenStorage = tokenStorage;\n      this.router = router;\n      this.formBuilder = formBuilder;\n      this.username = new FormControl(\"\");\n      this.password = new FormControl();\n      this.name = new FormControl(\"\");\n      this.role = new FormControl();\n      this.confirmPassword = new FormControl(\"\");\n      this.loginForm = this.formBuilder.group({\n        username: \"\",\n        password: 0\n      });\n      this.signForm = this.formBuilder.group({\n        name: \"\",\n        username: \"\",\n        password: 0,\n        role: 0\n      });\n      this.color = \"primary\";\n      this.isLoggedIn = false;\n      this.isLoginFailed = false;\n      this.isLoginOpen = false;\n      this.errorMessage = \"\";\n      this.roles = [];\n      this.isVisible = false;\n      this.time_to_show_login = 400;\n      this.time_to_hidden_login = 200;\n    } //[Validators.required,Validators.pattern(\n    //'^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$'\n    //)]\n\n\n    ngOnInit() {\n      if (this.tokenStorage.getToken()) {\n        this.isLoggedIn = true; // this.roles = this.tokenStorage.getUser().roles;\n      }\n    }\n\n    onRegister() {\n      this.signForm;\n      let roleNumber = null;\n      console.log(this.role.value);\n\n      if (this.role.value == \"Student\") {\n        roleNumber = 0;\n      } else {\n        roleNumber = 1;\n      }\n\n      this.signForm = this.formBuilder.group({\n        name: [this.name.value, Validators.required],\n        username: [this.username.value, Validators.required],\n        password: [Number(this.password.value), Validators.required],\n        role: [roleNumber, Validators.required]\n      });\n      this.student = this.signForm.value;\n      console.log(this.student);\n      this.authService.register(this.student).subscribe(data => {\n        console.log(\"the data here is \", data);\n      }, err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      });\n    }\n\n    onSubmit() {\n      // let user: User | undefined;\n      // let user: User | undefined;\n      // this.username=new FormControl('username')|;;\n      // this.password=new FormControl('password');;\n      // this.user.username = new FormControl('');\n      this.loginForm;\n      this.loginForm = this.formBuilder.group({\n        username: [this.username.value, Validators.required],\n        password: [Number(this.password.value), Validators.required]\n      }); // this.user = this.User;\n      // console.log(this.loginForm);\n      // console.log(this.username.value);\n      // console.log(this.password.value);\n\n      this.user = this.loginForm.value;\n      console.log(this.user);\n      this.authService.login(this.user).subscribe(data => {\n        console.log(\"the data here is \", data);\n        this.tokenStorage.saveToken(data.accessToken);\n        this.tokenStorage.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true; // this.roles = this.tokenStorage.getUser().roles;\n\n        this.reloadPage();\n      }, err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }); // if(!this.loginForm.valid){\n      //   return;\n      // }\n      // localStorage.setItem('user',this.loginForm.value)\n      // this.router.navigate(['/pageData'])\n    }\n\n    reloadPage() {\n      this.router.navigate([\"/home\"]);\n    }\n\n    loginModel() {\n      this.isLoginOpen = true;\n      this.isVisible = true;\n      console.log(\"yes\");\n      const div = document.querySelector(\".cont_forms\");\n      const divip = document.getElementById(\"cont_form_login\");\n      if (divip) if (div) {\n        const divup = document.getElementById(\"cont_form_sign_up\");\n\n        if (divup) {\n          div.className = \"cont_forms cont_forms_active_login\";\n          divip.style.opacity = \"1\";\n          divip.style.display = \"block\";\n          divup.style.display = \"none\";\n          divup.style.opacity = \"0\";\n        }\n      }\n    }\n\n    backDefault() {\n      console.log(\"noooooooooo\");\n      const div = document.querySelector(\".cont_forms\");\n      const divip = document.getElementById(\"cont_form_login\");\n      const divup = document.getElementById(\"cont_form_sign_up\");\n      if (divip) if (div) {\n        if (divup) div.className = \"cont_forms\";\n        divip.style.opacity = \"0\";\n        divip.style.display = \"none\";\n      }\n    }\n\n    sigupModel() {\n      this.isLoginOpen = true;\n      this.isVisible = true;\n      console.log(\"yes\");\n      const div = document.querySelector(\".cont_forms\");\n      const divip = document.getElementById(\"cont_form_sign_up\");\n      const divup = document.getElementById(\"cont_form_login\");\n      if (divip) if (div) {\n        if (divup) {\n          div.className = \"cont_forms cont_forms_active_sign_up\";\n          divip.style.opacity = \"1\";\n          divip.style.display = \"block\";\n          divup.style.display = \"none\";\n          divup.style.opacity = \"0\";\n        }\n      }\n    }\n\n    backDefaultsign() {\n      console.log(\"noooooooooo\");\n      const div = document.querySelector(\".cont_forms\");\n      const divip = document.getElementById(\"cont_form_sign_up\");\n      if (divip) if (div) {\n        div.className = \"cont_forms\";\n        divip.style.opacity = \"0\";\n        divip.style.display = \"none\";\n      }\n    }\n\n  }\n\n  LoginComponentComponent.ɵfac = function LoginComponentComponent_Factory(t) {\n    return new (t || LoginComponentComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.FormBuilder));\n  };\n\n  LoginComponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponentComponent,\n    selectors: [[\"app-login-component\"]],\n    decls: 57,\n    vars: 8,\n    consts: [[1, \"cotn_principal\"], [1, \"cont_centrar\"], [1, \"cont_login\"], [1, \"cont_info_log_sign_up\"], [1, \"col_md_login\"], [\"id\", \"cont_ba_opcitiy\", 1, \"cont_ba_opcitiy\"], [1, \"btn_login\", 3, \"click\"], [1, \"col_md_sign_up\"], [1, \"btn_sign_up\", 3, \"click\"], [1, \"cont_back_info\"], [1, \"cont_img_back_grey\"], [\"src\", \"https://images.unsplash.com/42/U7Fc1sy5SCUDIu4tlJY3_NY_by_PhilippHenzler_philmotion.de.jpg?ixlib=rb-0.3.5&q=50&fm=jpg&crop=entropy&s=7686972873678f32efaf2cd79671673d\", \"alt\", \"\"], [1, \"cont_forms\"], [1, \"cont_img_back_\"], [\"id\", \"cont_form_login\", 1, \"cont_form_login\"], [3, \"click\"], [1, \"material-icons\"], [\"type\", \"text\", \"placeholder\", \"Email\", 3, \"formControl\"], [\"type\", \"password\", \"placeholder\", \"Password\", 3, \"formControl\"], [\"id\", \"cont_form_sign_up\", 1, \"cont_form_sign_up\"], [\"type\", \"text\", \"placeholder\", \"name\", 3, \"formControl\"], [\"type\", \"text\", \"placeholder\", \"Username\", 3, \"formControl\"], [\"type\", \"password\", \"placeholder\", \"Confirm Password\", 3, \"formControl\"], [\"data-role\", \"controlgroup\"], [\"for\", \"male\"], [\"type\", \"radio\", \"name\", \"role\", \"id\", \"Student\", \"value\", \"Student\", \"checked\", \"\", 3, \"formControl\"], [\"for\", \"female\"], [\"type\", \"radio\", \"name\", \"role\", \"id\", \"Teacher\", \"value\", \"Teacher\", 3, \"formControl\"]],\n    template: function LoginComponentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h2\");\n        i0.ɵɵtext(7, \"LOGIN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\");\n        i0.ɵɵtext(9, \"Click Login button to sho the login dialog\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_button_click_10_listener() {\n          return ctx.loginModel();\n        });\n        i0.ɵɵtext(11, \"LOGIN\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"div\", 7)(13, \"div\", 5)(14, \"h2\");\n        i0.ɵɵtext(15, \"SIGN UP\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"p\");\n        i0.ɵɵtext(17, \"Click Login button to sho the signup dialog.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_button_click_18_listener() {\n          return ctx.sigupModel();\n        });\n        i0.ɵɵtext(19, \" SIGN UP \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(20, \"div\", 9)(21, \"div\", 10);\n        i0.ɵɵelement(22, \"img\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 12)(24, \"div\", 13);\n        i0.ɵɵelement(25, \"img\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 14)(27, \"a\", 15);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_a_click_27_listener() {\n          return ctx.backDefault();\n        });\n        i0.ɵɵelementStart(28, \"i\", 16);\n        i0.ɵɵtext(29, \"\\uE5C4\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"h2\");\n        i0.ɵɵtext(31, \"LOGIN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"input\", 17)(33, \"input\", 18);\n        i0.ɵɵelementStart(34, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_button_click_34_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(35, \"LOGIN\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"div\", 19)(37, \"a\", 15);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_a_click_37_listener() {\n          return ctx.backDefaultsign();\n        });\n        i0.ɵɵelementStart(38, \"i\", 16);\n        i0.ɵɵtext(39, \"\\uE5C4\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(40, \"h2\");\n        i0.ɵɵtext(41, \"SIGN UP\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"input\", 20)(43, \"input\", 21)(44, \"input\", 18)(45, \"input\", 22);\n        i0.ɵɵelementStart(46, \"fieldset\", 23)(47, \"legend\");\n        i0.ɵɵtext(48, \"Choose your Role:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"label\", 24);\n        i0.ɵɵtext(50, \"Student\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"input\", 25);\n        i0.ɵɵelementStart(52, \"label\", 26);\n        i0.ɵɵtext(53, \"Teacher\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(54, \"input\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function LoginComponentComponent_Template_button_click_55_listener() {\n          return ctx.onRegister();\n        });\n        i0.ɵɵtext(56, \" SIGN UP \");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(32);\n        i0.ɵɵproperty(\"formControl\", ctx.username);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.password);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formControl\", ctx.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.username);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.password);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.confirmPassword);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formControl\", ctx.role);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formControl\", ctx.role);\n      }\n    },\n    styles: [\"*{margin:0 auto;padding:0;text-align:center;font-family:Open Sans,sans-serif}.cotn_principal{position:absolute;width:100%;display:flex;height:100%;background:#cfd8dc;background:linear-gradient(135deg,#cfd8dc 0%,#607d8b 100%,#b0bec5 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\\\"#cfd8dc\\\",endColorstr=\\\"#b0bec5\\\",GradientType=1)}.cont_centrar{display:flex;align-self:center;width:100%}.cont_login{position:relative;width:640px}.cont_back_info{position:relative;float:left;width:640px;height:280px;overflow:hidden;background-color:#fff;box-shadow:1px 10px 30px -10px #00000080}.cont_forms{position:absolute;overflow:hidden;top:0;left:0;width:320px;height:280px;background-color:#eee;transition:all .5s}.cont_forms_active_login{box-shadow:1px 10px 30px -10px #00000080;height:420px;top:-60px;left:0;transition:all .5s}.cont_forms_active_sign_up{box-shadow:1px 10px 30px -10px #00000080;height:420px;top:-60px;left:320px;transition:all .5s}.cont_img_back_grey{position:absolute;width:950px;top:-80px;left:-116px}.cont_img_back_grey>img{width:100%;filter:grayscale(100%);opacity:.2;animation-name:animar_fondo;animation-duration:20s;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate}.cont_img_back_{position:absolute;width:950px;top:-80px;left:-116px}.cont_img_back_>img{width:100%;opacity:.3;animation-name:animar_fondo;animation-duration:20s;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate}.cont_forms_active_login>.cont_img_back_{top:-20px;transition:all .5s}.cont_forms_active_sign_up>.cont_img_back_{top:-20px;left:-435px;transition:all .5s}.cont_info_log_sign_up{position:absolute;width:640px;height:280px;top:0;z-index:1}.col_md_login{position:relative;float:left;width:50%}.col_md_login>h2{font-weight:400;margin-top:70px;color:#757575}.col_md_login>p{font-weight:400;margin-top:15px;width:80%;color:#37474f}.btn_login{background-color:#26c6da;border:none;padding:10px;width:200px;border-radius:3px;box-shadow:1px 5px 20px -5px #0006;color:#fff;margin-top:10px;cursor:pointer}.col_md_sign_up{position:relative;float:left;width:50%}.cont_ba_opcitiy>h2{font-weight:400;color:#fff}.cont_ba_opcitiy>p{font-weight:400;margin-top:15px;color:#fff}.cont_ba_opcitiy{position:relative;background-color:#78909c8c;width:80%;border-radius:3px;margin-top:60px;padding:15px 0}.btn_sign_up{background-color:#ef5350;border:none;padding:10px;width:200px;border-radius:3px;box-shadow:1px 5px 20px -5px #0006;color:#fff;margin-top:10px;cursor:pointer}.cont_forms_active_sign_up{z-index:2}@keyframes identifier{0%{transform:scale(1)}to{transform:scale(1.5)}}#cont_form_login{position:absolute;opacity:0;display:none;width:320px;transition:all .5s}.cont_forms_active_login{z-index:2}#cont_form_sign_up{position:absolute;width:320px;float:left;opacity:0;display:none;transition:all .5s}.cont_form_sign_up>input{text-align:left;padding:15px 5px;margin-left:10px;margin-top:20px;width:260px;border:none;color:#757575}.cont_form_sign_up>h2{margin-top:50px;font-weight:400;color:#757575}.cont_form_login>input{padding:15px 5px;margin-left:10px;margin-top:20px;width:260px;border:none;text-align:left;color:#757575}.cont_form_login>h2{margin-top:110px;font-weight:400;color:#757575}.cont_form_login>a,.cont_form_sign_up>a{color:#757575;position:relative;float:left;margin:10px 10px 10px 30px}\\n\"],\n    encapsulation: 2\n  });\n  return LoginComponentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}